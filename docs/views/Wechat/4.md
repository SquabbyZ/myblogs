---
title: 微信小程序判断用户首次登录
date: 2021-05-10
tags:
 - Wechat
categories:
 - Wechat
---

<b>本篇文章，技术点很简单， 只是想分享想思路</b>

## 背景
  营销玩法的一个需求，需要判断用户每日首次打开小程序，弹出一个活动的弹窗，当天弹窗弹出后，不会再自动弹出


## "笨"思路

  因为前面做了个倒计时，所以大脑的思维一直卡在，如何通过定时器，来实现需要的效果，想到的是，自定义一个 `flag` 值存储在小程序的 `storage` 中，设为false，当用户当天首次进入到小程序之后，将该 `flag` 设置为 true  (代表，用户今日首次进来后，加个标记),当天再次进来时候，因为该值以已经变为true 
 所以当天用户再进入的时候，不会自动弹窗，满足了背景的前半需求，但是有个弊端，怎么让这个 `flag` 的值变为 `false`,来满足新的一天的需求，想加个定时器，在每天的 23:59:59 的时候，触发定时器的回调事件，把 `flag` 变为fasle，先不考虑是否能实现，增加了一个定时器，多少会有一些性能的影响


## 新思路
我们还是在微信小程序的storage中加入判断值，只不过不采用 `Boolean` ，而是储存当天的年月日，用户每次打开小程序的时候，获取当天的年月日，和调取储存在storage中的那个年月日的值，两个值进行比对，如果不同就弹出弹窗，并且把获取的当天的年月日的值更新到微信小程序的对应的值，即可。



欢迎纠错和讨论 :)