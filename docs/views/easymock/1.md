---
title: 阿里云部署 easymock
date: 2020-04-25
tags:
  - easymock
categories:
  - easymock
---

## 准备

1. [安装node](../nodejs/2.md)
2. [安装 mongodb](../mondonDB/3.md)
3. redis 安装
```shell
cd /usr/local/src
wget http://download.redis.io/releases/redis-3.2.0.tar.gz
tar xzf redis-3.2.0.tar.gz
cd redis-3.2.0
make

```
运行完上面的命令之后显示 `Hint: It's a good idea to run 'make test' ;)` 即是安装成功了 然后启动服务
```shell
cd /usr/local/src/redis-3.2.0/src
./redis-server
```
一顿自动运行之后，显示 `30038:M 25 Apr 17:21:26.206 * The server is now ready to accept connections on port 6379` ,证明 redis 在 6379 端口上运行了

## 部署 easy-mock

在 `/usr`  文件夹下执行下面的命令

```shell
 cd /usr
find libra
#find: ‘libra’: No such file or directory,这个显示该目录下没有 libra 文件夹
mkdir libra
cd libra
git clone https://github.com/easy-mock/easy-mock.git
#然后 npm 安装依赖
cd easy-mock
npm install

```
然后配置阿里云的安全规则组和防火墙

然后安装两个插件 `pm2` 和 `cross-env`,因为我是属于那种自己离线安装的 node 所以我直接手动做了两个软连接
```shell
npm i -g cross-env pm2
ln -s /home/zhuhaifeng/node/bin/pm2 /usr/bin/pm2
ln -s /home/zhuhaifeng/node/bin/cross-env /usr/bin/cross-env
cd /usr/libra/easy-mock
npm run build
cross-env NODE_ENV=production pm2 start app.js

```
## 开机自启

在 `/etc/rc.loacl` 里添加

```shell
cross-env NODE_ENV=production pm2 start app.js

```
添加进去

## 测试地址

[SquabbyZ的小黑屋](http://39.106.197.44:7300)