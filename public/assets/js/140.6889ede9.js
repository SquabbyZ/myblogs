(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{543:function(s,a,e){"use strict";e.r(a);var t=e(4),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#准备"}},[s._v("#")]),s._v(" 准备")]),s._v(" "),e("ol",[e("li",[e("RouterLink",{attrs:{to:"/views/nodejs/2.html"}},[s._v("node 安装")])],1),s._v(" "),e("li",[e("RouterLink",{attrs:{to:"/views/MongonDB/3.html"}},[s._v("MongonDB 安装 ")])],1),s._v(" "),e("li",[s._v("git 安装,一般购买的服务器都有如果没有的话使用下面的命令安装")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("yum -y "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"正式安装开始"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#正式安装开始"}},[s._v("#")]),s._v(" 正式安装开始")]),s._v(" "),e("ol",[e("li",[s._v("安装 yapiCLI 工具")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g yapi-cli --registry https://registry.npm.taobao.org\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("启动服务，这里需要配置下阿里云的安全组规则，如果开启了防火墙也需要你在防火墙中配置下，之后执行下面的命令，默认是9090端口，所以把9090端口放开")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("yapi server\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("看到下图就证明前期准备完成\n"),e("img",{attrs:{src:"http://lc-zltjehaI.cn-n1.lcfile.com/60c4d13ecc991116a6d9/yapi1-1.png",alt:""}})]),s._v(" "),e("p",[s._v("数据库认证，我们这里就不选了，把其他的必填项都填好，然后点击 "),e("code",[s._v("开始部署")]),s._v(" "),e("img",{attrs:{src:"http://lc-zltjehaI.cn-n1.lcfile.com/5b914cb152d43267e581/yapi1-2.png",alt:""}})]),s._v(" "),e("p",[s._v("它会一直自己安装，如果没有问题就OK了")]),s._v(" "),e("h2",{attrs:{id:"后台运行项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#后台运行项目"}},[s._v("#")]),s._v(" 后台运行项目")]),s._v(" "),e("p",[s._v("我们在安装的时候填写的那个端口就是后期启动 yapi 可视化的端口，这里使用 forever 来后台启动项目，安装完成后，我们先试试，执行下面的命令")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/zhuhaifeng/my-yapi/vendors/server\nnode app.js\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("可以显示下图就是没问题\n"),e("img",{attrs:{src:"http://lc-zltjehaI.cn-n1.lcfile.com/82a3bb71dc84e285ecc7/yapi1-3.png",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"彩蛋-做个-service-脚本，来开机自启"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#彩蛋-做个-service-脚本，来开机自启"}},[s._v("#")]),s._v(" 彩蛋--做个 service 脚本，来开机自启")]),s._v(" "),e("p",[s._v("新建一个 "),e("code",[s._v("myyapi.service")]),s._v(" 文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("myyapi\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network.target remote-fs.target nss-lookup.target\n\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forking\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WorkingDirectory")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/zhuhaifeng/my-yapi/vendors/server\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/bin/forever start app.js\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecReload")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/bin/forever restart app.js\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStop")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/bin/forever stop app.js\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateTmp")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RemainAfterExit")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("p",[e("RouterLink",{attrs:{to:"/views/nodejs/4.html"}},[s._v("具体的 service 脚本配置操作请看")])],1),s._v(" "),e("h2",{attrs:{id:"安装过程中我遇到的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装过程中我遇到的问题"}},[s._v("#")]),s._v(" 安装过程中我遇到的问题")]),s._v(" "),e("ol",[e("li",[e("code",[s._v("> yapi-vendor@1.8.8 install-server /home/zhuhaifeng/node/bin/my-yapi/vendors > node server/install.js Error: (node:13875) DeprecationWarning: current Server Discovery and Monitoring engine is deprecated, and will be removed in a future version. To use the new Server Discover and Monitoring engine, pass option { useUnifiedTopology: true } to the MongoClient constructor.")])])]),s._v(" "),e("p",[e("strong",[s._v("解决办法:")]),s._v(" 删除 "),e("code",[s._v("mongoDB")]),s._v(" 数据库中新建的库，再删除 "),e("code",[s._v("init.lock")]),s._v(" 文件")]),s._v(" "),e("ol",[e("li",[s._v("删除新建的库")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("mongo\nshow dbs\nuse yapi\ndb.dropDatabase"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("删除 "),e("code",[s._v("init.lock")]),s._v(" 文件")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/zhuhaifeng/my-yapi\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" init.lock -rf\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("在项目目录下执行 "),e("code",[s._v("npm run install-server")]),s._v(" 即可")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/zhuhaifeng/my-yapi/vendors\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run install-server\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ol",{attrs:{start:"4"}},[e("li",[e("strong",[e("span",{staticStyle:{color:"red"}},[s._v("显示出你之前填的那个邮箱就是用户名，会生成一个随机密码，一定要记下来，然后登陆进去再改")])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);