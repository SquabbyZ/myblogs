(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{442:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"项目需求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#项目需求"}},[s._v("#")]),s._v(" 项目需求")]),s._v(" "),t("p",[s._v("因为作者使用的是长城飞腾2000 服务器，系统使用的是 天津麒麟 (国产 arm64 Linux 系统)，而且项目是局域网开发，在 "),t("a",{attrs:{href:"hub.docker.com"}},[s._v("docker 官方找到的 fastdfs docker")]),s._v("库中，前人做好的镜像根本就没有标注 docker 镜像的内核是什么版本，直接拿下来使用，发现生成 docker 容器的时候 (也就是 "),t("code",[s._v("docker run ...")]),s._v(") 之后会报错 "),t("code",[s._v('standard_init_linux.go:190: exec user process caused "exec format err')]),s._v(",所以自己在本地 windows 系统上开始创建一个 "),t("code",[s._v("fastdfs")]),s._v(" docker 镜像。")]),s._v(" "),t("h2",{attrs:{id:"整体思路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#整体思路"}},[s._v("#")]),s._v(" 整体思路")]),s._v(" "),t("p",[s._v("起初我是在 "),t("a",{attrs:{href:"hub.docker.com"}},[s._v("docker 官方的库")]),s._v(" 中找了个支持 "),t("code",[s._v("arm64")]),s._v(" 内核的 centos 镜像，而且也制作好了 fastdfs 的 docker 镜像，但是在服务器上创建 docker 容器的时候还是会报错 "),t("code",[s._v('standard_init_linux.go:190: exec user process caused "exec format err')]),s._v(" ，就算是使用命令 "),t("code",[s._v("docker start xxx")]),s._v(" 强启动容器，还是无法启动，所以在制作一个 "),t("code",[s._v("Ubuntu")]),s._v(" 内核是 arm64 版本的 "),t("code",[s._v("fastdfs")]),s._v(" docker 镜像，以此记录下整个制作过程，也算是，实操了一把自己动手制作 "),t("code",[s._v("docker image")]),s._v(", Let's do it.")]),s._v(" "),t("h2",{attrs:{id:"准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备"}},[s._v("#")]),s._v(" 准备")]),s._v(" "),t("p",[s._v("因为我们下载的 "),t("code",[s._v("Ubuntu")]),s._v(" docker 镜像是最小的版本，里面除了最最基本的命令外，其他的命令和环境都没有，比如没有 "),t("code",[s._v("gcc、gc++ 、make")]),s._v(" 等等，让我们先开始装吧")]),s._v(" "),t("ol",[t("li",[s._v("安装 "),t("code",[s._v("gcc gc++ make")]),s._v("\n我们先执行 "),t("code",[s._v("apt-get update")]),s._v(",让系统更新下，遇到 "),t("code",[s._v("Y/n")]),s._v(" 的时候输入 Y 就行，因为是在问你是否下载包，下载就可以了。\n然后在执行 "),t("code",[s._v("apt install build-essential")]),s._v(",静静的安装就好了，安装完输入 "),t("code",[s._v("gcc --version")]),s._v(",可以看到版本信息就是安装好了")]),s._v(" "),t("li",[s._v("安装 "),t("code",[s._v("libevent")]),s._v("\n执行命令 "),t("code",[s._v("apt-get install libevent-dev")])]),s._v(" "),t("li",[s._v("安装 "),t("code",[s._v("wget")]),s._v(",方便后面下载安装依赖 "),t("code",[s._v("apt-get install wget")])]),s._v(" "),t("li",[s._v("安装 "),t("code",[s._v("perl")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /fileservice/fast\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://www.cpan.org/src/5.0/perl-5.28.2.tar.gz\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xzf perl-5.28.2.tar.gz\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" perl-5.28.2\n    ./Configure -des -Dprefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/localperl\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("安装nginx时依赖库zlib，pcre，openssl")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openssl libssl-dev "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#依赖包openssl安装")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libpcre3 libpcre3-dev "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#依赖包pcre安装")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" zlib1g-dev "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#依赖包zlib安装")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",{attrs:{start:"6"}},[t("li",[s._v("安装 vim 编译器 "),t("code",[s._v("apt-get install vim")])])]),s._v(" "),t("h2",{attrs:{id:"安装步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装步骤"}},[s._v("#")]),s._v(" 安装步骤")]),s._v(" "),t("ol",[t("li",[s._v("在根目录下创建 "),t("code",[s._v("/fileservice/fast")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /fileservice/fast\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /fileservice/fast\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("把 "),t("a",{attrs:{href:"http://39.106.197.44/static/fastdfs-5.11.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("fastdfs-5.11.tar.gz"),t("OutboundLink")],1),s._v(" 、"),t("a",{attrs:{href:"http://39.106.197.44/static/fastdfs-nginx-module-1.20.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("fastdfs-nginx-module-1.20.tar.gz"),t("OutboundLink")],1),s._v("、 "),t("a",{attrs:{href:"http://39.106.197.44/static/libfastcommon-1.0.35.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("libfastcommon-1.0.35.tar.gz"),t("OutboundLink")],1),s._v("、 "),t("a",{attrs:{href:"http://39.106.197.44/static/nginx-1.15.2.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("nginx-1.15.2.tar.gz"),t("OutboundLink")],1),s._v("这四个文件下载下来，传入进去,"),t("span",{staticStyle:{color:"red"}}),s._v("在上传的文件的目录下执行下面的命令")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("        docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("fastdfs-5.11.tar.gz test100:/fileservice/fast\n        docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("fastdfs-nginx-module-1.20.tar.gz test100:/fileservice/fast\n        docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("libfastcommon-1.0.35.tar.gz test100:/fileservice/fast\n        docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("nginx-1.15.2.tar.gz test100:/fileservice/fast\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("安装libfastcommon\n进入fast目录：")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /fileservice/fast\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf libfastcommon-1.0.35.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" libfastcommon-1.0.35\n./make.sh\n./make.sh "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ol",[t("li",[t("p",[s._v("安装 fastdfs\n先安装相关依赖库 "),t("code",[s._v("perl")]),s._v("、"),t("code",[s._v("pcre")]),s._v("、"),t("code",[s._v("pcre-devel")]),s._v("、"),t("code",[s._v("zlib")]),s._v("、"),t("code",[s._v("zlib-devel")]),s._v("、"),t("code",[s._v("openssl")]),s._v("、"),t("code",[s._v("openssl-devel")])])]),s._v(" "),t("li",[t("p",[s._v("安装fastdfs\n进入fast目录：")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /fileservice/fast\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf fastdfs-5.11.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" fastdfs-5.11\n./make.sh\n./make.sh "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ol",{attrs:{start:"6"}},[t("li",[s._v("查看tracker和storage的可执行脚本(后面有用)")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ll /etc/init.d/ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" fdfs\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"7"}},[t("li",[s._v("准备配置文件  默认在/etc/fdfs/下面")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/fdfs/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"8"}},[t("li",[s._v("先把配置文件名中的sample去了。[可以复制一份]")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" client.conf.sample client.conf\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" storage.conf.sample storage.conf\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" storage_ids.conf.sample storage_ids.conf\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" tracker.conf.sample tracker.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ol",{attrs:{start:"9"}},[t("li",[s._v("然后修改tracker的存放数据和日志的目录。")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /home/zhu/fastdfs/tracker\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ol",{attrs:{start:"10"}},[t("li",[s._v("配置和启动tracker\n切换目录到： /etc/fdfs/ 目录下,修改tracker.conf,把 "),t("code",[s._v("base_path=/home/yuqing/fastdfs 改为: base_path=/home/zhu/fastdfs/tracker")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v("  /etc/fdfs/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" tracker.conf\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" fdfs_trackerd  start "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动tracker")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("会在 "),t("code",[s._v("/home/zhu/fastdfs/tracker")]),s._v(" 目录下生成 "),t("code",[s._v("data")]),s._v(" 和 "),t("code",[s._v("logs")]),s._v(" 两个文件夹")]),s._v(" "),t("ol",{attrs:{start:"11"}},[t("li",[s._v("配置和启动storage\n由于上面已经安装过FastDFS，这里只需要配置storage就好了，切换目录到： "),t("code",[s._v("/etc/fdfs/")]),s._v(" 目录下,修改storage.conf ; vim storage.conf")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/fdfs/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" storage.conf\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("将 "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("storage.conf"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" 文件中的\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("group_name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("group1 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置组名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("base_path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/yuqing/fastdfs 改为: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("base_path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/zhu/fastdfs/storage\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#store存放文件的位置(store_path)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("store_path0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/yuqing/fastdfs 改为： "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("store_path0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/zhu/fastdfs/storage\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果有多个挂载磁盘则定义多个store_path，如下")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#store_path1=.....")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#store_path2=......")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置tracker服务器:IP")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tracker_server")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:22122  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("因为我们是在docker 中， fastdfs 不允许使用 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果有多个则配置多个tracker")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("ol",{attrs:{start:"12"}},[t("li",[s._v("创建/home/zhu/fastdfs/storage 目录")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /home/zhu/fastdfs/storage\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" fdfs_storaged start "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动storage")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",{attrs:{start:"13"}},[t("li",[s._v("使用FastDFS自带工具测试")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/fdfs/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" client.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("修改基本路径和tracker_server如下 "),t("code",[s._v("base_path=/home/yuqing/fastdfs 改为: base_path=/home/zhu/fastdfs/storage")]),s._v(","),t("code",[s._v("tracker_server=0.0.0.0:22122")])]),s._v(" "),t("ol",{attrs:{start:"14"}},[t("li",[s._v("向 "),t("code",[s._v("root")]),s._v(" 目录下考入一个图片文件，然后执行")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\n/usr/bin/fdfs_upload_file /etc/fdfs/client.conf /root/11.png\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("返回结果为 "),t("code",[s._v("group1/M00/00/00/fwAAAV82FKGAcmhBAABzjHEcGKw545.jpg")]),s._v(",则证明 fastdfs 安装启动成功")])])}),[],!1,null,null,null);a.default=n.exports}}]);