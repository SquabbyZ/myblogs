(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{477:function(s,a,n){"use strict";n.r(a);var e=n(4),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"注意事项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[s._v("#")]),s._v(" 注意事项")]),s._v(" "),n("p",[s._v("如果你之前配置完成后启动 "),n("code",[s._v("Mongodb")]),s._v(" 的时候报如下错误")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("mongod: error "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" loading shared libraries: libnetsnmpagent.so.20: cannot "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" shared object file: No such "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("strong",[s._v("解决方法")])]),s._v(" "),n("p",[s._v("1.安装 "),n("code",[s._v("net-snmp")]),s._v(" "),n("code",[s._v("yum install net-snmp")])]),s._v(" "),n("p",[s._v("2.如果上述方法还不行，那就是你下载的 "),n("code",[s._v("Mongondb")]),s._v(" 包不对,按下面地址下载再重新配置一遍即可\n"),n("code",[s._v("wget http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-4.0.14.tgz")])]),s._v(" "),n("h2",{attrs:{id:"下载-mongodb-包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下载-mongodb-包"}},[s._v("#")]),s._v(" 下载 Mongodb 包")]),s._v(" "),n("p",[n("code",[s._v("wget http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-4.0.14.tgz")])]),s._v(" "),n("h2",{attrs:{id:"解压到你想要使用的目录里"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解压到你想要使用的目录里"}},[s._v("#")]),s._v(" 解压到你想要使用的目录里")]),s._v(" "),n("p",[s._v("我是直接在 "),n("code",[s._v("/home/zhuhaifeng")]),s._v(" 目录下解压的")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf mongodb-linux-x86_64-4.0.14.tgz\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" mongodb-linux-x86_64-4.0.14.tgz mongodb4.0.14 //修改解压包名字为 mongodb4.0.14\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"配置系统文件-profile-也就是添加环境变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置系统文件-profile-也就是添加环境变量"}},[s._v("#")]),s._v(" 配置系统文件 profile(也就是添加环境变量)")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/profile\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("打开后在文件的末尾处添加:")]),s._v(" "),n("p",[n("code",[s._v("export MONGODB_HOME=/home/zhuhaifeng/mongodb4.0.14 export PATH=$PATH:$MONGODB_HOME/bin")])]),s._v(" "),n("p",[s._v("然后再加载下")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"创建用于存放数据和日志的文件夹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建用于存放数据和日志的文件夹"}},[s._v("#")]),s._v(" 创建用于存放数据和日志的文件夹")]),s._v(" "),n("p",[s._v("回到 "),n("code",[s._v("/home/zhuhaifeng/mongodb4.0.14")]),s._v(" 目录下,执行下面的命令进行创建")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p data/db\n "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" -R "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" data\n "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" logs\n "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" logs\n "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" mongodb.log\n "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/\n "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" -R "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" logs  //执行 "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" 命令要是 "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("root"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" 权限\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"配置-mongodb-启动设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置-mongodb-启动设置"}},[s._v("#")]),s._v(" 配置 mongodb 启动设置")]),s._v(" "),n("p",[s._v("进入到 "),n("code",[s._v("/home/zhuhaifeng/mongodb4.0.14/bin")]),s._v(",执行下面的命令")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" mongodb.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("然后添加如下的内容：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("dbpath =/home/zhuhaifeng/mongodb4.0.14/data/db #数据文件存放目录\nlogpath = /home/zhuhaifeng/mongodb4.0.14/logs/mongodb.log #日志文件存放目录\nport = 27017  #端口\nfork = true  #以守护程序的方式启用，即在后台运行\nbind_ip=0.0.0.0; #mongodb远程连接做准备,默认是127.0.0.1\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("同时把 "),n("code",[s._v("mongod")]),s._v(" 和 "),n("code",[s._v("mongo")]),s._v(" 做一个软连接,目的是为了全局都可以执行这个命令")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /home/zhuhaifeng/mongodb4.0.14/bin/mongod /usr/bin/mongod\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"让-mongodb-按照配置的内容启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#让-mongodb-按照配置的内容启动"}},[s._v("#")]),s._v(" 让 mongodb 按照配置的内容启动")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("mongod -f /home/zhuhaifeng/mongodb4.0.14/bin/mongodb.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("如果未报任何异常执行 "),n("code",[s._v("mongo")]),s._v(" ,显示进入到数据库即可。")]),s._v(" "),n("h2",{attrs:{id:"设置-service-服务以及开机自启"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置-service-服务以及开机自启"}},[s._v("#")]),s._v(" 设置 service 服务以及开机自启")]),s._v(" "),n("p",[s._v("进入到 "),n("code",[s._v("lib/systemd/system")]),s._v(" 文件夹内,执行 "),n("code",[s._v("vim mongodb.service")]),s._v(" 后将下面的内容添加进去即可")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[Unit]\nDescription=mongodb\nAfter=network.target remote-fs.target nss-lookup.target\n\n[Service]\nType=forking\nExecStart=/home/zhuhaifeng/mongodb4.0.14/bin/mongod --config /home/zhuhaifeng/mongodb4.0.14/bin/mongodb.conf\nExecReload=/bin/kill -s HUP $MAINPID\nExecStop=/home/zhuhaifeng/mongodb4.0.14/bin/mongod --shutdown --config /home/zhuhaifeng/mongodb4.0.14/bin/mongodb.conf\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("然后记得把 "),n("code",[s._v("mongodb.service")]),s._v(" 文件的权限修改为 755 ,默认为 644,在当前的目录下执行\n"),n("code",[s._v("chmod 755 mongodb.service")])]),s._v(" "),n("p",[s._v("然后再重载下 "),n("code",[s._v("daemon-reload")]),s._v(" ,执行 "),n("code",[s._v("systemctl daemon-reload")])]),s._v(" "),n("p",[s._v("**注意:**当你配置完了 service 启动文件后，一定要有 "),n("code",[s._v("kill")]),s._v(" 命令把刚才你起来的 Mongodb 服务杀掉，要不你执行 "),n("code",[s._v("systemctl start mongodb.service")]),s._v(" 会报 "),n("code",[s._v('Job for mongodb.service failed because the control process exited with error code. See "systemctl status mongodb.service" and "journalctl -xe" for details.')]),s._v(" 意思是让你看下服务器的失败的原因")]),s._v(" "),n("h3",{attrs:{id:"对应的-mongodb-service-命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#对应的-mongodb-service-命令"}},[s._v("#")]),s._v(" 对应的 mongodb.service 命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 启动停止命令\n\nsystemctl start mongodb.service //service 可以省略\n\n# 停止服务命令\n\nsystemctl stop mongodb.service\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"mongodb-远程链接设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-远程链接设置"}},[s._v("#")]),s._v(" MongoDB 远程链接设置")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("前提")]),s._v(" "),n("p",[s._v("我是在阿里云服务器上搭建的 "),n("code",[s._v("Mongodb")]),s._v(" 的数据库，每次只能在 "),n("code",[s._v("Xshell")]),s._v(" 访问，对于后台开发来说很麻烦。因此我在自己的本机上下载了 "),n("code",[s._v("Rebo 3T")]),s._v(" 软件来链接我的阿里云服务器上的数据库，和后期使用数据库方便。")])]),s._v(" "),n("p",[s._v("在云服务器的防火墙开放 27017 端口")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(" -j ACCEPT\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("百度上搜的"),n("a",{attrs:{href:"https://jingyan.baidu.com/album/27fa73265478c646f8271fa0.html?picindex=4",target:"_blank",rel:"noopener noreferrer"}},[s._v("阿里云 ECS 端口映射操作步骤"),n("OutboundLink")],1),s._v("，只需在 "),n("code",[s._v("安全组规则")]),s._v(" 里添加 出方向和入方向,自定义 TCP 即可，端口填 27107，即可")]),s._v(" "),n("h2",{attrs:{id:"检查服务器端口监听状态是否启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#检查服务器端口监听状态是否启动"}},[s._v("#")]),s._v(" 检查服务器端口监听状态是否启动")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -antp\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("欢迎评论纠错来踩 😃")])])}),[],!1,null,null,null);a.default=t.exports}}]);