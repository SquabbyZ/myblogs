(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{500:function(s,a,e){"use strict";e.r(a);var n=e(4),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#准备"}},[s._v("#")]),s._v(" 准备")]),s._v(" "),e("ol",[e("li",[e("RouterLink",{attrs:{to:"/views/nodejs/2.html"}},[s._v("安装node")])],1),s._v(" "),e("li",[e("RouterLink",{attrs:{to:"/views/mondonDB/3.html"}},[s._v("安装 mongodb")])],1),s._v(" "),e("li",[s._v("redis 安装")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/zhuhaifeng\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://download.redis.io/releases/redis-5.0.8.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xzf redis-3.2.0.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" redis-3.2.0\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("运行完上面的命令之后显示 "),e("code",[s._v("Hint: It's a good idea to run 'make test' ;)")]),s._v(" 即是安装成功了 然后启动服务")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/zhuhaifeng/redis-5.0.8/src\n./redis-server\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("一顿自动运行之后，显示 "),e("code",[s._v("30038:M 25 Apr 17:21:26.206 * The server is now ready to accept connections on port 6379")]),s._v(" ,证明 redis 在 6379 端口上运行了")]),s._v(" "),e("h3",{attrs:{id:"redis-配置及后台启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis-配置及后台启动"}},[s._v("#")]),s._v(" redis 配置及后台启动")]),s._v(" "),e("p",[s._v("将 redis 文件夹下的有个 "),e("code",[s._v("redis.conf")]),s._v(" 文件，只需要把 "),e("code",[s._v("daemonize")]),s._v(" 的值修改为 true\n然后在 "),e("code",[s._v("/home/zhuhaifeng/redis-5.0.8/src")]),s._v(" 目录下执行 "),e("code",[s._v("./redis-server /home/zhuhaifeng/redis-5.0.8/redis.conf")]),s._v(",即可")]),s._v(" "),e("h3",{attrs:{id:"redis-配置服务脚本并开机自启"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis-配置服务脚本并开机自启"}},[s._v("#")]),s._v(" redis 配置服务脚本并开机自启")]),s._v(" "),e("p",[s._v("下面的就是配置的 redis.service  文件 放入到 "),e("code",[s._v("/usr/lib/systemd/system")]),s._v(", 然后执行下面的命令")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("chomd "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("755")]),s._v(" redis.service "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改 redis.service 文件权限")]),s._v("\nsystemctl daemon-reload "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重载下 systemctl 服务")]),s._v("\nsystemctl start redis.service "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直接启动服务")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" redis "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#测试是否后台启动了 redis 服务")]),s._v("\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("然后在 "),e("code",[s._v("/etc/rc.local")]),s._v(" 文件内添加 "),e("code",[s._v("systemctl start redis.service")]),s._v(" ,这里就是开机自启的配置")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Redis\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network.target\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forking\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PIDFile")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/run/redis_6379.pid\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/zhuhaifeng/redis-5.0.8/src/redis-server /home/zhuhaifeng/redis-5.0.8/redis.conf\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecReload")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/bin/kill -s HUP "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MAINPID")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStop")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/bin/kill -s QUIT "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MAINPID")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateTmp")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("h2",{attrs:{id:"部署-easy-mock"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署-easy-mock"}},[s._v("#")]),s._v(" 部署 easy-mock")]),s._v(" "),e("p",[s._v("在 "),e("code",[s._v("/usr")]),s._v("  文件夹下执行下面的命令")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" libra\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#find: ‘libra’: No such file or directory,这个显示该目录下没有 libra 文件夹")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" libra\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" libra\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/easy-mock/easy-mock.git\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#然后 npm 安装依赖")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" easy-mock\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("然后配置阿里云的安全规则组和防火墙")]),s._v(" "),e("p",[s._v("然后安装两个插件 "),e("code",[s._v("pm2")]),s._v(" 和 "),e("code",[s._v("cross-env")]),s._v(",因为我是属于那种自己离线安装的 node 所以我直接手动做了两个软连接")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -g cross-env pm2\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /home/zhuhaifeng/node/bin/pm2 /usr/bin/pm2\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /home/zhuhaifeng/node/bin/cross-env /usr/bin/cross-env\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/libra/easy-mock\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\ncross-env "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODE_ENV")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("production pm2 start app.js\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h2",{attrs:{id:"开机自启"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开机自启"}},[s._v("#")]),s._v(" 开机自启")]),s._v(" "),e("p",[s._v("在 "),e("code",[s._v("/etc/rc.loacl")]),s._v(" 里添加")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("cross-env "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODE_ENV")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("production pm2 start app.js\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("添加进去")]),s._v(" "),e("h2",{attrs:{id:"测试地址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试地址"}},[s._v("#")]),s._v(" 测试地址")]),s._v(" "),e("p",[e("a",{attrs:{href:"http://39.106.197.44:7300",target:"_blank",rel:"noopener noreferrer"}},[s._v("SquabbyZ的小黑屋"),e("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=t.exports}}]);