<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript 基础 | SquabbyZ的小黑屋</title>
    <meta name="description" content="一只致力于成为全栈的小胖纸.">
    <meta name="generator" content="VuePress 1.3.1">
    <script src="http://lc-zltjehai.cn-n1.lcfile.com/4b9f43bce8bf5c4ed59d/clickheart.js"></script>
  <script src="http://lc-zltjehai.cn-n1.lcfile.com/12fe8a35feaf973b9bf7/baidu.js"></script>
  <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.5cce7e23.css" as="style"><link rel="preload" href="/assets/js/app.4408c1df.js" as="script"><link rel="preload" href="/assets/js/4.73e12695.js" as="script"><link rel="preload" href="/assets/js/1.7bb093f7.js" as="script"><link rel="preload" href="/assets/js/48.48325f0a.js" as="script"><link rel="prefetch" href="/assets/js/10.92ea4a8f.js"><link rel="prefetch" href="/assets/js/100.1d6bece8.js"><link rel="prefetch" href="/assets/js/101.7aaa39fd.js"><link rel="prefetch" href="/assets/js/102.fce79c09.js"><link rel="prefetch" href="/assets/js/103.c9b3df9d.js"><link rel="prefetch" href="/assets/js/104.90b2bc2b.js"><link rel="prefetch" href="/assets/js/105.ee03d873.js"><link rel="prefetch" href="/assets/js/106.a798558e.js"><link rel="prefetch" href="/assets/js/107.f0795c47.js"><link rel="prefetch" href="/assets/js/108.0236570b.js"><link rel="prefetch" href="/assets/js/109.7ddaba00.js"><link rel="prefetch" href="/assets/js/11.cd70b17b.js"><link rel="prefetch" href="/assets/js/110.6a3c691f.js"><link rel="prefetch" href="/assets/js/111.3bdf43e7.js"><link rel="prefetch" href="/assets/js/112.ba954476.js"><link rel="prefetch" href="/assets/js/113.5eacb456.js"><link rel="prefetch" href="/assets/js/114.344111a1.js"><link rel="prefetch" href="/assets/js/115.cea9cf1d.js"><link rel="prefetch" href="/assets/js/116.3abf609a.js"><link rel="prefetch" href="/assets/js/117.9ab833f7.js"><link rel="prefetch" href="/assets/js/118.3b47df40.js"><link rel="prefetch" href="/assets/js/119.5cc92936.js"><link rel="prefetch" href="/assets/js/12.d9d6f4ea.js"><link rel="prefetch" href="/assets/js/120.c4241fef.js"><link rel="prefetch" href="/assets/js/121.e134db20.js"><link rel="prefetch" href="/assets/js/122.6c9d771e.js"><link rel="prefetch" href="/assets/js/123.f6a9d814.js"><link rel="prefetch" href="/assets/js/124.2bc87738.js"><link rel="prefetch" href="/assets/js/13.aecf17e7.js"><link rel="prefetch" href="/assets/js/14.eecc2a87.js"><link rel="prefetch" href="/assets/js/15.81b3f082.js"><link rel="prefetch" href="/assets/js/16.ba0eadae.js"><link rel="prefetch" href="/assets/js/17.79c6c1d6.js"><link rel="prefetch" href="/assets/js/18.b27ce2c6.js"><link rel="prefetch" href="/assets/js/19.283952c0.js"><link rel="prefetch" href="/assets/js/20.96a4bd1b.js"><link rel="prefetch" href="/assets/js/21.d3082a13.js"><link rel="prefetch" href="/assets/js/22.aa9b773f.js"><link rel="prefetch" href="/assets/js/23.138c7e47.js"><link rel="prefetch" href="/assets/js/24.83d7e147.js"><link rel="prefetch" href="/assets/js/25.513345bf.js"><link rel="prefetch" href="/assets/js/26.0f16fe3b.js"><link rel="prefetch" href="/assets/js/27.f2be9a16.js"><link rel="prefetch" href="/assets/js/28.693957f1.js"><link rel="prefetch" href="/assets/js/29.8056a472.js"><link rel="prefetch" href="/assets/js/30.94fb7809.js"><link rel="prefetch" href="/assets/js/31.7fb6ea7d.js"><link rel="prefetch" href="/assets/js/32.14bef240.js"><link rel="prefetch" href="/assets/js/33.8207b06f.js"><link rel="prefetch" href="/assets/js/34.1bda4b00.js"><link rel="prefetch" href="/assets/js/35.058d13da.js"><link rel="prefetch" href="/assets/js/36.9a9807d0.js"><link rel="prefetch" href="/assets/js/37.6e53d4a9.js"><link rel="prefetch" href="/assets/js/38.0e56194a.js"><link rel="prefetch" href="/assets/js/39.8aa82c1a.js"><link rel="prefetch" href="/assets/js/40.6351f5f0.js"><link rel="prefetch" href="/assets/js/41.821b572e.js"><link rel="prefetch" href="/assets/js/42.ccd1d5ee.js"><link rel="prefetch" href="/assets/js/43.82f4419f.js"><link rel="prefetch" href="/assets/js/44.bea9519c.js"><link rel="prefetch" href="/assets/js/45.a5495d73.js"><link rel="prefetch" href="/assets/js/46.be80966b.js"><link rel="prefetch" href="/assets/js/47.87a0b780.js"><link rel="prefetch" href="/assets/js/49.44373860.js"><link rel="prefetch" href="/assets/js/5.b7b95d70.js"><link rel="prefetch" href="/assets/js/50.65a09cd0.js"><link rel="prefetch" href="/assets/js/51.01bcbacd.js"><link rel="prefetch" href="/assets/js/52.0e1edccb.js"><link rel="prefetch" href="/assets/js/53.04d20299.js"><link rel="prefetch" href="/assets/js/54.b538b65a.js"><link rel="prefetch" href="/assets/js/55.43cc773d.js"><link rel="prefetch" href="/assets/js/56.7016f2ca.js"><link rel="prefetch" href="/assets/js/57.718e62a8.js"><link rel="prefetch" href="/assets/js/58.d0610784.js"><link rel="prefetch" href="/assets/js/59.37e67b4c.js"><link rel="prefetch" href="/assets/js/6.5e9a0980.js"><link rel="prefetch" href="/assets/js/60.96ef1fee.js"><link rel="prefetch" href="/assets/js/61.f89a3729.js"><link rel="prefetch" href="/assets/js/62.9806d152.js"><link rel="prefetch" href="/assets/js/63.fa38dd7a.js"><link rel="prefetch" href="/assets/js/64.83f26cdb.js"><link rel="prefetch" href="/assets/js/65.aa275fa7.js"><link rel="prefetch" href="/assets/js/66.7f5a6b8a.js"><link rel="prefetch" href="/assets/js/67.e4d9d2d3.js"><link rel="prefetch" href="/assets/js/68.24eddf14.js"><link rel="prefetch" href="/assets/js/69.0bb2bf26.js"><link rel="prefetch" href="/assets/js/7.19b14d89.js"><link rel="prefetch" href="/assets/js/70.b3396125.js"><link rel="prefetch" href="/assets/js/71.458e291f.js"><link rel="prefetch" href="/assets/js/72.60dd9b2b.js"><link rel="prefetch" href="/assets/js/73.d2a0320b.js"><link rel="prefetch" href="/assets/js/74.3f569f9b.js"><link rel="prefetch" href="/assets/js/75.4808714f.js"><link rel="prefetch" href="/assets/js/76.cb85e8fa.js"><link rel="prefetch" href="/assets/js/77.3f63703c.js"><link rel="prefetch" href="/assets/js/78.15ab064e.js"><link rel="prefetch" href="/assets/js/79.a7c88c7f.js"><link rel="prefetch" href="/assets/js/8.4ab6ceee.js"><link rel="prefetch" href="/assets/js/80.6555f0c6.js"><link rel="prefetch" href="/assets/js/81.8fa6de00.js"><link rel="prefetch" href="/assets/js/82.549e6b76.js"><link rel="prefetch" href="/assets/js/83.304ee703.js"><link rel="prefetch" href="/assets/js/84.073cf6da.js"><link rel="prefetch" href="/assets/js/85.693cd331.js"><link rel="prefetch" href="/assets/js/86.fe5e70f7.js"><link rel="prefetch" href="/assets/js/87.a8e8d37c.js"><link rel="prefetch" href="/assets/js/88.26fa4dd2.js"><link rel="prefetch" href="/assets/js/89.aaf31b4b.js"><link rel="prefetch" href="/assets/js/9.527454a1.js"><link rel="prefetch" href="/assets/js/90.1a0d7f86.js"><link rel="prefetch" href="/assets/js/91.ec4f9155.js"><link rel="prefetch" href="/assets/js/92.6efd5183.js"><link rel="prefetch" href="/assets/js/93.184dd7d5.js"><link rel="prefetch" href="/assets/js/94.df98a048.js"><link rel="prefetch" href="/assets/js/95.4a835350.js"><link rel="prefetch" href="/assets/js/96.1d600435.js"><link rel="prefetch" href="/assets/js/97.04cc7c1e.js"><link rel="prefetch" href="/assets/js/98.e5337729.js"><link rel="prefetch" href="/assets/js/99.c6835ff0.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.57b4a9e1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5cce7e23.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container" data-v-4698c43e><div data-v-4698c43e><div id="loader-wrapper" class="loading-wrapper" data-v-4b73742e data-v-4698c43e data-v-4698c43e><div class="loader-main" data-v-4b73742e><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-6cbeab0a data-v-4698c43e data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>SquabbyZ的小黑屋</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>zhuhaifeng</span>
            
          <span data-v-6cbeab0a>2019 - </span>
          2020
        </a></span></div></div> <div class="hide" data-v-4698c43e><header class="navbar" data-v-4698c43e><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="SquabbyZ的小黑屋" class="logo"> <span class="site-name">SquabbyZ的小黑屋</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/CSS3/" class="nav-link"><i class="iconfont undefined"></i>
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/categories/Centos/" class="nav-link"><i class="iconfont undefined"></i>
  Centos
</a></li><li class="dropdown-item"><!----> <a href="/categories/Docker/" class="nav-link"><i class="iconfont undefined"></i>
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/categories/ES6/" class="nav-link"><i class="iconfont undefined"></i>
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/categories/Html5/" class="nav-link"><i class="iconfont undefined"></i>
  Html5
</a></li><li class="dropdown-item"><!----> <a href="/categories/JQuery/" class="nav-link"><i class="iconfont undefined"></i>
  JQuery
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/categories/Jenkins/" class="nav-link"><i class="iconfont undefined"></i>
  Jenkins
</a></li><li class="dropdown-item"><!----> <a href="/categories/LeetCode/" class="nav-link"><i class="iconfont undefined"></i>
  LeetCode
</a></li><li class="dropdown-item"><!----> <a href="/categories/Kylin/" class="nav-link"><i class="iconfont undefined"></i>
  Kylin
</a></li><li class="dropdown-item"><!----> <a href="/categories/Leaflet/" class="nav-link"><i class="iconfont undefined"></i>
  Leaflet
</a></li><li class="dropdown-item"><!----> <a href="/categories/MongonDB/" class="nav-link"><i class="iconfont undefined"></i>
  MongonDB
</a></li><li class="dropdown-item"><!----> <a href="/categories/Sass/" class="nav-link"><i class="iconfont undefined"></i>
  Sass
</a></li><li class="dropdown-item"><!----> <a href="/categories/Typescript/" class="nav-link"><i class="iconfont undefined"></i>
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/categories/MySql/" class="nav-link"><i class="iconfont undefined"></i>
  MySql
</a></li><li class="dropdown-item"><!----> <a href="/categories/Webpack/" class="nav-link"><i class="iconfont undefined"></i>
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/categories/VueRouter/" class="nav-link"><i class="iconfont undefined"></i>
  VueRouter
</a></li><li class="dropdown-item"><!----> <a href="/categories/easymock/" class="nav-link"><i class="iconfont undefined"></i>
  easymock
</a></li><li class="dropdown-item"><!----> <a href="/categories/Wechat/" class="nav-link"><i class="iconfont undefined"></i>
  Wechat
</a></li><li class="dropdown-item"><!----> <a href="/categories/elasticsearch/" class="nav-link"><i class="iconfont undefined"></i>
  elasticsearch
</a></li><li class="dropdown-item"><!----> <a href="/categories/Echarts/" class="nav-link"><i class="iconfont undefined"></i>
  Echarts
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nginx/" class="nav-link"><i class="iconfont undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/categories/Node.js/" class="nav-link"><i class="iconfont undefined"></i>
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nuxt/" class="nav-link"><i class="iconfont undefined"></i>
  Nuxt
</a></li><li class="dropdown-item"><!----> <a href="/categories/React/" class="nav-link"><i class="iconfont undefined"></i>
  React
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/win7/" class="nav-link"><i class="iconfont undefined"></i>
  win7
</a></li><li class="dropdown-item"><!----> <a href="/categories/yapi/" class="nav-link"><i class="iconfont undefined"></i>
  yapi
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><a href="/library/" class="nav-link"><i class="iconfont reco-up"></i>
  库
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系方式
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/SquabbyZ" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/SquabbyZ" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-qq"></i>
  601709253
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/SquabbyZ" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-wechat"></i>
  601709253
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/views/other/guide.html" class="nav-link"><i class="iconfont reco-account"></i>
  关于博主
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-4698c43e></div> <aside class="sidebar" data-v-4698c43e><div class="personal-info-wrapper" data-v-6c8ffc9c><!----> <h3 class="name" data-v-6c8ffc9c>
    zhuhaifeng
  </h3> <div class="num" data-v-6c8ffc9c><div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>108</h3> <h6 data-v-6c8ffc9c>文章</h6></div> <div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>28</h3> <h6 data-v-6c8ffc9c>标签</h6></div></div> <hr data-v-6c8ffc9c></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/CSS3/" class="nav-link"><i class="iconfont undefined"></i>
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/categories/Centos/" class="nav-link"><i class="iconfont undefined"></i>
  Centos
</a></li><li class="dropdown-item"><!----> <a href="/categories/Docker/" class="nav-link"><i class="iconfont undefined"></i>
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/categories/ES6/" class="nav-link"><i class="iconfont undefined"></i>
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/categories/Html5/" class="nav-link"><i class="iconfont undefined"></i>
  Html5
</a></li><li class="dropdown-item"><!----> <a href="/categories/JQuery/" class="nav-link"><i class="iconfont undefined"></i>
  JQuery
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/categories/Jenkins/" class="nav-link"><i class="iconfont undefined"></i>
  Jenkins
</a></li><li class="dropdown-item"><!----> <a href="/categories/LeetCode/" class="nav-link"><i class="iconfont undefined"></i>
  LeetCode
</a></li><li class="dropdown-item"><!----> <a href="/categories/Kylin/" class="nav-link"><i class="iconfont undefined"></i>
  Kylin
</a></li><li class="dropdown-item"><!----> <a href="/categories/Leaflet/" class="nav-link"><i class="iconfont undefined"></i>
  Leaflet
</a></li><li class="dropdown-item"><!----> <a href="/categories/MongonDB/" class="nav-link"><i class="iconfont undefined"></i>
  MongonDB
</a></li><li class="dropdown-item"><!----> <a href="/categories/Sass/" class="nav-link"><i class="iconfont undefined"></i>
  Sass
</a></li><li class="dropdown-item"><!----> <a href="/categories/Typescript/" class="nav-link"><i class="iconfont undefined"></i>
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/categories/MySql/" class="nav-link"><i class="iconfont undefined"></i>
  MySql
</a></li><li class="dropdown-item"><!----> <a href="/categories/Webpack/" class="nav-link"><i class="iconfont undefined"></i>
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/categories/VueRouter/" class="nav-link"><i class="iconfont undefined"></i>
  VueRouter
</a></li><li class="dropdown-item"><!----> <a href="/categories/easymock/" class="nav-link"><i class="iconfont undefined"></i>
  easymock
</a></li><li class="dropdown-item"><!----> <a href="/categories/Wechat/" class="nav-link"><i class="iconfont undefined"></i>
  Wechat
</a></li><li class="dropdown-item"><!----> <a href="/categories/elasticsearch/" class="nav-link"><i class="iconfont undefined"></i>
  elasticsearch
</a></li><li class="dropdown-item"><!----> <a href="/categories/Echarts/" class="nav-link"><i class="iconfont undefined"></i>
  Echarts
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nginx/" class="nav-link"><i class="iconfont undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/categories/Node.js/" class="nav-link"><i class="iconfont undefined"></i>
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nuxt/" class="nav-link"><i class="iconfont undefined"></i>
  Nuxt
</a></li><li class="dropdown-item"><!----> <a href="/categories/React/" class="nav-link"><i class="iconfont undefined"></i>
  React
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/win7/" class="nav-link"><i class="iconfont undefined"></i>
  win7
</a></li><li class="dropdown-item"><!----> <a href="/categories/yapi/" class="nav-link"><i class="iconfont undefined"></i>
  yapi
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><a href="/library/" class="nav-link"><i class="iconfont reco-up"></i>
  库
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系方式
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/SquabbyZ" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/SquabbyZ" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-qq"></i>
  601709253
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/SquabbyZ" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-wechat"></i>
  601709253
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/views/other/guide.html" class="nav-link"><i class="iconfont reco-account"></i>
  关于博主
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript 基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/JavaScript/1.html#基本类型和引用类型" class="sidebar-link">基本类型和引用类型</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/JavaScript/1.html#类型判断" class="sidebar-link">类型判断</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/JavaScript/1.html#强制类型转换" class="sidebar-link">强制类型转换</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/JavaScript/1.html#强制类型转换与操作符" class="sidebar-link">强制类型转换与操作符</a></li><li class="sidebar-sub-header"><a href="/views/JavaScript/1.html#作用域" class="sidebar-link">作用域</a></li><li class="sidebar-sub-header"><a href="/views/JavaScript/1.html#event-loop" class="sidebar-link">event loop</a></li><li class="sidebar-sub-header"><a href="/views/JavaScript/1.html#理解函数的执行过程" class="sidebar-link">理解函数的执行过程</a></li><li class="sidebar-sub-header"><a href="/views/JavaScript/1.html#this-指向" class="sidebar-link">this 指向</a></li><li class="sidebar-sub-header"><a href="/views/JavaScript/1.html#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/views/JavaScript/1.html#原型和原型链" class="sidebar-link">原型和原型链</a></li><li class="sidebar-sub-header"><a href="/views/JavaScript/1.html#js-的继承" class="sidebar-link">js 的继承</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-6cbeab0a data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>JavaScript 基础</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>zhuhaifeng</span>
            
          <span data-v-6cbeab0a>2019 - </span>
          2020
        </a></span></div></div> <div data-v-4698c43e><main class="page"><!----> <div class="page-title" style="display:none;"><h1>JavaScript 基础</h1> <hr> <div data-v-484a899e><i class="iconfont reco-account" data-v-484a899e><span data-v-484a899e>zhuhaifeng</span></i> <i class="iconfont reco-date" data-v-484a899e><span data-v-484a899e>2019-09-25</span></i> <i class="iconfont reco-eye" data-v-484a899e><span id="/views/JavaScript/1.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-484a899e><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont reco-tag tags" data-v-484a899e><span class="tag-item" data-v-484a899e>
      JavaScript
    </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><p>原文地址:<a href="https://juejin.im/post/5d54e78be51d4561b072dce6" target="_blank">https://juejin.im/post/5d54e78be51d4561b072dce6</a></p> <h2 id="基本类型和引用类型"><a href="#基本类型和引用类型" class="header-anchor">#</a> 基本类型和引用类型</h2> <hr> <p>js 中数据类型分为基本类型和引用类型,基本类型有六种:</p> <ul style="color:red;"><li> number</li> <li> string</li> <li> boolean</li> <li> null</li> <li> undefinded</li> <li> symbol <span style="color:black;">(es6)</span></li></ul> <p>引用类型包括对象<span style="color:red;">Object</span>、数组<span style="color:red;">Array</span>、函数<span style="color:red;">Function</span>等，统称对象类型：</p> <li style="color:red;"> object</li> <p>1.<span style="color:red;">string</span> 类型即字符串，除了单引号双引号， es6 中引入了新的反引导 ---&gt; `` (<strong><em>模板字符串</em></strong>)</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">m</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">m + n = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>2.<span style="color:red;">number</span> 类型值包括整数、浮点数、NaN 、Infinity 等。其中 <span style="color:red;">NaN</span> 类型是 js 中唯一不等于自身的类型，当发生未定义数学操作的时候，就会返回 <span style="color:red;"> NaN </span>,如: <span style="color:red;">1 * 'asdf'</span> 、 <span style="color:red;">Number('asdf')</span>。浮点数的运算可能会出现如下示例: <span style="color:red;">0.1+0.2 ! == 0.3</span> 的问题，这是由于浮点运算的精度的问题，一般采用 <span style="color:red;">toFixed(10)</span>便可以解决此类问题。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//未处理时候运算得到的结果为:0.300000000000004</span>

<span class="token comment">//要让结果等于 0.3 用 数字的 &quot;toFixed()&quot; 方法</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a <span class="token operator">*</span> <span class="token number">1</span> <span class="token operator">+</span> b <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//这里为什么将 a 和 b 都乘以个数字 1 的原因是 &quot;+&quot; 默认为两个字符串的拼接，&quot;toFixed()&quot; 为数字的方法，用乘 1 的方式强行将 a 和 b 转换成数字，以防 &quot;toFixed()&quot; 方法调用报错；</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><span style="color:red;">boolean</span> 、<span style="color:red;">string</span> 和 <span style="color:red;">number</span> 类型作为基本类型，按理说应该是没有函数可以调用的，因为基本类型没有原型链可以提供方法，因为基本类型没有原型链可以提供方法。但是，这三种类型却能调用 <span style="color:red;">toString</span> 等对象原型上的方法:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token boolean">true</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'true'</span>
<span class="token string">&quot;asdf&quot;</span><span class="token punctuation">.</span><span class="token function">toStirng</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'asdf'</span>
<span class="token number">NaN</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'NaN'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面的例子里，<span style="color:red;">NaN</span> 是属于数字类型的，但是并没有举例出我们常见的数字来调用 <span>toString</span> 方法，示例如下:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//以上三种调用都是可以的，数字后面的第一个点会被解释为小数点，而不是调用的方法的点。这里作为基本了解就可以，使用的意义不大。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong><em>这里你可能会有些疑问：为什么基本类型也可以直接调用引用类型的方法呢？</em></strong>
其实是 js 引擎在解析上面的语句的时候，会把这三种基本类型解析为 <strong><em>包装对象</em></strong> (就是使用了 new 方法)，而包装对象是引用类型可以调用 &lt;span style=&quot;color&quot;red;&quot;&gt;Object.prototype 上的方法。大概的过程如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token string">'asdf'</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'asdf'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'asdf'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><span style="colro:red;">null</span> 的含义为 &quot;无&quot; 、&quot;空&quot;或者&quot;值未知&quot;。除了变量已经声明未赋值的情况下是 <span style="color:red;">undefined</span> ,若对象的属性不存在也是 &lt;span style=&quot;color&quot;red;&quot;&gt;undefined。所以应该尽量避免使用 <span style="color:red;">&quot; var a= undefined; var o= {b:undefined} &quot;</span>这样的写法，取而代之的是用 <span style="color:red;"> &quot;var a =null; var o= {b:null}&quot; </span>,以与 &quot;未被赋值&quot; 默认的 &lt;span style=&quot;color&quot;red;&quot;&gt;undefined 的情况相区分。</p> <p><span style="color:red;">Symbol</span> 值表示唯一的标识符。可以用 <span style="color:red;">Symbol()</span>函数创建:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;asdf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;asdf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a <span class="token operator">===</span> b<span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>还可以用做对象的属性，但此时是不能被 <span style="color:red;">for...in</span> 遍历的:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&quot;qasaqwe12dasd1231&quot;</span><span class="token punctuation">,</span>
  a<span class="token operator">:</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span> <span class="token string">&quot;b&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//a b</span>
  obj<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//'qasaqwe12dasd1231'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>还存在很多系统内置的 <span style="color:red;">Symbol</span>,如 <span style="color:red;">Symbol.toPrimitive</span> <span style="color:red;">Symbol.iterator</span> 等。当发生引用类型强制转成基本类型的操作时候，就会触发内置的 <span style="color:red;">Symbol.toPrimitive</span> 函数，当然也可以给对象手动添加 <span style="color:red;">Symbol.toPrimitive</span> 函数来覆盖默认的强制类型转换行为。</p> <p><span style="color:red;">object</span> 是引用类型，引用类型和基本类型不同的是，原始类型存储的是值，引用类型存储的是一个指向对象的真实内存地址的指针。在 js 中，对象包括 <span style="color:red;">Array Object Function RegExp Math</span> 等。</p> <p>js 所有的函数语句都是在执行栈中执行的，所有的变量也在执行栈中保存着值或者引用。基本类型就存储在栈内存中，保存的是实际值;引用类型存储在堆内存中，在栈中只保存着变量指向内存地址的指针。</p> <div class="language- extra-class"><pre><code>         &lt;b style=&quot;font-size:22px;&quot;&gt;栈内存&lt;/b&gt;                                                &lt;b style=&quot;font-size:22px;&quot;&gt;堆内存&lt;/b&gt;
</code></pre></div><p><img src="http://lc-zltjehai.cn-n1.lcfile.com/98f6dc72aa418f59f04a/%E6%A0%88%E5%86%85%E5%AD%98%E4%B8%8E%E5%A0%86%E5%86%85%E5%AD%98.png" alt="avatar"></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span> <span class="token string">&quot;b&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> o2 <span class="token operator">=</span> o<span class="token punctuation">;</span> <span class="token comment">// 变量o2复制了变量o的指针，现在他们都指向同一个内存地址，现在开始他们的增删改其实是在同一个内存地址上的操作</span>
o2<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">;</span> <span class="token comment">// （增）现在o.c也是'c'</span>
<span class="token keyword">delete</span> o2<span class="token punctuation">.</span>b<span class="token punctuation">;</span> <span class="token comment">// （删）现在o.b也不存在了</span>
o2<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">&quot;a2&quot;</span><span class="token punctuation">;</span> <span class="token comment">// (改)现在o.a也是'a2'</span>
o2 <span class="token operator">=</span> <span class="token string">&quot;o2&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 现在变量o2被赋值'o2'，已经和原来的内存地址断绝了关系，但变量 o 仍然指向老地址</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="类型判断"><a href="#类型判断" class="header-anchor">#</a> 类型判断</h2> <hr> <p>判断引用类型和基本类型的类型是不同的，判断基本类型可以用 <span style="color:red;"> typeof</span> :</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">typeof</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 'number'</span>
<span class="token keyword">typeof</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 'string'</span>
<span class="token keyword">typeof</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// 'undefined'</span>
<span class="token keyword">typeof</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 'boolean'</span>
<span class="token keyword">typeof</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'symbol'</span>
<span class="token keyword">typeof</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 'object'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>可以看到除了 <span style="color:red;"> null </span>其他基本类型的判断都是正常的， <span style="color:red;"> typeof(null) === 'object' </span>是一个历史悠久的 <strong>bug</strong> ，就是在 JS 的最初版本中 <span style="color:red;"> null </span> 的内存存储信息是 <span style="color:red;">000</span> 开头的，而<span style="color:red;">000</span>开头会被判断为 <span style="color:red;"> object </span>类型。虽然现在内部类型判断代码已经改变了，但是这个 <strong>bug</strong> 却不得不随着版本保留了下来，因为修改这个 <strong>bug</strong> 会导致巨多的网站出现 bug。</p> <p><span style="color:red;"> typeof </span>对引用类型，除了函数返回的 <span style="color:red;"> function </span>，其他都返回 <span style="color:red;"> object </span>。但是在我们的开发过程中数组肯定是要返回 <span style="color:red;"> Array </span>类型的，所有 <span style="color:red;"> typeof </span>对引用类型来说并不是很适用。判断引用类型一般用 <span style="color:red;"> instanceof </span>:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">fun</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> obj<span class="token punctuation">;</span> <span class="token comment">// 'object'</span>
<span class="token keyword">typeof</span> arr<span class="token punctuation">;</span> <span class="token comment">// 'object'</span>
<span class="token keyword">typeof</span> fun<span class="token punctuation">;</span> <span class="token comment">// 'function'</span>
obj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
arr <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
fun <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>可以看到 <span style="color:red;"> instanceof </span>操作符可以正确的判断出引用类型的类型。<span style="color:red;"> instanceof </span>本质上是判断右边的构造函数的<span style="color:red;"> prototype </span>对象是否存在于左边的原型链上，是的话返回 true 。所以不论数组、对象还是函数， <span style="color:red;"> ... instanceof Object </span>都返回 true。</p> <p>最后来一种全能型判断类型方法:</p> <p><span style="color:red;"> Object.prototype.toString.call(...) </span>,可以自行尝试。</p> <h2 id="强制类型转换"><a href="#强制类型转换" class="header-anchor">#</a> 强制类型转换</h2> <hr> <p>JS 是弱类型语言，不同类型之间在一定情况下会发生强制类型转换，比如在相等性的比较的时候。</p> <li>基础类型的相等性比较的是值是否相等</li> <li>对象相等性比较的是内存地址是否相同</li> <p>下面来看一个有意思的比较吧:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// ?</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// ?</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>对于 <span style="color:red;"> [] {} function (){} </span>，因为涉及到强制类型转换，所以才会复杂的多</p> <h3 id="强制类型转换与操作符"><a href="#强制类型转换与操作符" class="header-anchor">#</a> 强制类型转换与操作符</h3> <p>JS 是弱类型语言，不同类型之间在一定情况下会发生强制类型转换，比如在相等性比较的时候。</p> <p>基本类型的相等性比较的是值是否一样，对象相等性比较的是内存地址是否相同。下面来看一个有意思的比较把：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// ?</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// ?</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>[] == ![] 返回 true 的真相把：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">/*
 * 首先，布尔操作符!优先级更高，所以被转变为：[] == false
 * 其次，操作数存在布尔值false，将布尔值转为数字：[] == 0
 * 再次，操作数[]是对象，转为原始类型（先调用valueOf()，得到的还是[]，再调用toString()，得到空字符串''）：'' == 0
 * 最后，字符串和数字比较，转为数字：0 == 0
 */</span>
<span class="token number">NaN</span> <span class="token operator">==</span> <span class="token number">NaN</span><span class="token punctuation">;</span> <span class="token comment">// false     NaN不等于任何值</span>
<span class="token keyword">null</span> <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token keyword">null</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="作用域"><a href="#作用域" class="header-anchor">#</a> 作用域</h3> <hr> <p>js 中的作用域是词法作用域，是由 函数声明时 所在的位置决定的。词法作用域是指在编译阶段就产生的，一整套函数标识符的访问规则。 说到底 js 的作用域只是一个“空地盘”，其中并没有真实的变量，但是却定义了变量如何访问的规则。（词法作用域是在编译阶段就确认的，区别于词法作用域，动态作用域是在函数执行的时候确认的，js 的没有动态作用域，但 js 的 this 很像动态作用域，后面会提到。语言也分为静态语言和动态语言，静态语言是指数据类型在编译阶段就确定的语言如 java，动态语言是指在运行阶段才确定数据类型的语言如 javascript。）
作用域链本质上是一个指向变量对象的指针列表，它只引用不包含实际变量对象，是作用域概念的延申。作用域链定义了在当前上下文访问不到变量的时候如何沿作用域链继续查询变量的一套规则。</p> <hr> <h3 id="event-loop"><a href="#event-loop" class="header-anchor">#</a> event loop</h3> <p>js 是单线程的，所有任务需要排队，前一个任务结束，才会执行后一个任务。如果前一个任务耗时很长，后一个任务就不得不一直等着。但是 IO 设备（输入输出设备）很慢（比如 Ajax 操作从网络读取数据），js 不可能等待 IO 设备执行完成才继续执行下一个的任务，这样就失去了这门语言的意义。所以 js 的任务分为同步任务和异步任务。</p> <ol><li>所有同步任务都是在主线程执行，形成一个“执行栈”（就是下图中的 stack）；</li> <li>所有的异步任务都会暂时挂起，等待运行有了结果之后，其回调函数就会进入“任务队列”（task queue）排队等待；</li> <li>当执行栈中的所有同步任务都执行完成之后，就会读取任务队列中的第一个的回调函数，并将该回调函数推入执行栈开始执行；</li> <li>主线程不断循环重复第三步，这就是“event loop”的运行机制。</li></ol> <p><img src="http://lc-zltjehai.cn-n1.lcfile.com/967d27ed14aca00497cd/event%20loop%E7%9A%84%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E5%9B%BE.png" alt="avatar"></p> <p>上图中，主线程运行的时候，产生堆（heap）和栈（stack），堆用来存放数组对象等引用类型，栈中的代码调用各种外部 API，它们在&quot;任务队列&quot;中加入各种事件（click，load，done）。只要栈中的代码执行完毕，主线程就会去读取&quot;任务队列&quot;，依次执行那些事件所对应的回调函数。</p> <p>任务队列中有两种异步任务，一种是宏任务，包括 script setTimeout setInterval 等，另一种是微任务，包括 Promise process.nextTick MutationObserver 等。每当一个 js 脚本运行的时候，都会先执行 script 中的整体代码；当执行栈中的同步任务执行完毕，就会执行微任务中的第一个任务并推入执行栈执行，当执行栈为空，则再次读取执行微任务，循环重复直到微任务列表为空。等到微任务列表为空，才会读取宏任务中的第一个任务并推入执行栈执行，当执行栈为空则再读取执行微任务，微任务为空才再读取执行宏任务，如此循环.</p> <h4 id="执行上下文："><a href="#执行上下文：" class="header-anchor">#</a> 执行上下文：</h4> <p>执行上下文是指 函数调用时 在执行栈中产生的当前函数（或全局对象 window）的执行环境，这个环境就像一个隔绝外面世界的容器结界，里面存放着可以访问的变量、this 对象等。例如：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> fn<span class="token punctuation">,</span> bar<span class="token punctuation">;</span> <span class="token comment">// 1、进入全局上下文环境</span>
<span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
  <span class="token function">fn</span><span class="token punctuation">(</span>x <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3、进入fn函数上下文环境</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y <span class="token operator">+</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//4、fn出栈，bar出栈</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2、进入bar函数上下文环境</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="http://lc-zltjehai.cn-n1.lcfile.com/ec56d54c16e0e1820cca/JS%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B.png" alt="avatar"></p> <p>每次函数调用时，执行栈栈顶都会产生一个新的执行上下文环境。栈底永远都是全局上下文，而栈顶就是当前处于活动状态的正在执行代码的上下文。</p> <h3 id="理解函数的执行过程"><a href="#理解函数的执行过程" class="header-anchor">#</a> 理解函数的执行过程</h3> <hr> <p><strong><em>本文重点，让你对函数执行过程的理解更上一层楼！</em></strong></p> <p>函数的执行过程分成两阶段，第一阶段是创建执行上下文环境阶段，第二阶段是代码执行阶段：</p> <p><img src="http://lc-zltjehai.cn-n1.lcfile.com/8bbd64b95121fd8a410f/%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png" alt="avatar"></p> <li> 创建执行上下文阶段(发生在 函数被调用时 &amp;&amp; 函数体内的代码执行前 )。</li> <p><img src="http://lc-zltjehai.cn-n1.lcfile.com/079c99afa0e3fce900f5/%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F1.png" alt="avatar"></p> <ol><li>创建变量对象，这个过程会：创建 arguments 对象，初始化函数参数变量 ---&gt; 检查创建当前上下文环境中的 function 函数声明（即所谓的函数声明提升） ---&gt; 检查创建当前上下文环境中的 var 变量声明（即所谓变量提升）、let const 声明；</li></ol> <p><img src="http://lc-zltjehai.cn-n1.lcfile.com/efc4976b68e88607f06a/%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F2.png" alt="avatar"></p> <ol start="2"><li><p>建立作用域链，确定在当前上下文环境寻找变量的规则；</p></li> <li><p>确定 this 对象的指向；</p></li></ol> <li> 代码执行阶段：</li> <ol start="4"><li>执行函数体内的代码，这个阶段会完成变量赋值，函数引用，以及执行其他代码。</li></ol> <p>在未进入执行阶段之前，变量对象中的属性还在创建都不能访问。但是进入执行阶段之后，变量对象创建完成转变为了活动对象，里面的属性都能被访问了，然后才开始进行执行阶段的操作。也就是说，变量对象和活动对象的唯一区别就是处于执行上下文的不同生命周期。</p> <p>变量对象详细介绍 <a target="_blank" href="https://link.juejin.im?target=https%3A%2F%2Fwww.cnblogs.com%2Flsgxeva%2Fp%2F7976034.html" rel="nofollow noopener noreferrer">此文</a></p> <h3 id="this-指向"><a href="#this-指向" class="header-anchor">#</a> this 指向</h3> <hr> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  fn
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 方法1</span>
obj<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 方法2</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 方法3</span>
<span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 方法4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol><li>方法 1 中直接调用函数 fn()，这种看着像光杆司令的调用方式，this 指向 window（严格模式下是 undefined）。</li> <li>方法 2 中是点调用 obj.fn()，此时 this 指向 obj 对象。点调用中 this 指的是点前面的对象。</li> <li>方法 3 中利用 call 函数把 fn 中的 this 指向了第一个参数，这里是 obj。即利用 call、apply、bind 函数可以把函数的 this 变量指向第一个参数。</li> <li>方法 4 中用 new 实例化了一个对象 instance，这时 fn 中的 this 就指向了实例 instance。</li></ol> <p>如果同时发生了多个规则怎么办？其实上面四条规则的优先级是递增的：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> obj<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token keyword">new</span> <span class="token class-name">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>首先，new 调用的优先级最高，只要有 new 关键字，this 就指向实例本身；接下来如果没有 new 关键字，有 call、apply、bind 函数，那么 this 就指向第一个参数；然后如果没有 new、call、apply、bind，只有 obj.foo()这种点调用方式，this 指向点前面的对象；最后是光杆司令 foo() 这种调用方式，this 指向 window（严格模式下是 undefined）。</p> <p>es6 中新增了箭头函数，而箭头函数最大的特色就是没有自己的 this、arguments、super、new.target，并且箭头函数没有原型对象 prototype 不能用作构造函数（new 一个箭头函数会报错）。因为没有自己的 this，所以箭头函数中的 this 其实指的是包含函数中的 this。无论是点调用，还是 call 调用，都无法改变箭头函数中的 this。</p> <h3 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h3> <hr> <p>很长时间以来我对闭包都停留在“定义在一个函数内部的函数”这样肤浅的理解上。事实上这只是闭包形成的必要条件之一。直到后来看了 kyle 大佬的《你不知道的 javascript》上册关于闭包的定义，我才豁然开朗：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>当函数能够记住并访问所在的词法作用域时，就产生了闭包。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> single <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function">plus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      count<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">minus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      count<span class="token operator">--</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
single<span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
single<span class="token punctuation">.</span><span class="token function">minus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>这是个单例模式，这个模式返回了一个对象并赋值给变量 single，变量 single 中包含两个函数 plus 和 minus，而这两个函数都用到了所在词法作用域中的变量 count。正常情况下 count 和所在的执行上下文会在函数执行结束时被销毁，但是由于 count 还在被外部环境使用，所以在函数执行结束时 count 和所在的执行上下文不会被销毁，这就产生了闭包。每次调用 single.plus()或者 single.minus()，就会对闭包中的 count 变量进行修改，这两个函数就保持住了对所在的词法作用域的引用。</p> <p>闭包其实是一种特殊的函数，它可以访问函数内部的变量，还可以让这些变量的值始终保持在内存中，不会在函数调用后被垃圾回收机制清除。</p> <p>看个经典安案例：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 方法1</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 方法2</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ol><li>方法 1 中，循环设置了五个定时器，一秒后定时器中回调函数将执行，打印变量 i 的值。毋庸置疑，一秒之后 i 已经递增到了 6，所以定时器打印了五次 6 。（定时器中并没有找到当前作用域的变量 i，所以沿作用域链找到了全局作用域中的 i）</li> <li>方法 2 中，由于 es6 的 let 会创建局部作用域，所以循环设置了五个作用域，而五个作用域中的变量 i 分布是 1-5，每个作用域中又设置了一个定时器，打印一秒后变量 i 的值。一秒后，定时器从各自父作用域中分别找到的变量 i 是 1-5 。这是个利用闭包解决循环中变量发生异常的新方法。</li></ol> <h3 id="原型和原型链"><a href="#原型和原型链" class="header-anchor">#</a> 原型和原型链</h3> <hr> <p>js 中的几乎所有对象都有一个特殊的[[Prototype]]内置属性，用来指定对象的原型对象，这个属性实质上是对其他对象的引用。在浏览器中一般都会暴露一个私有属性 <strong>proto</strong>，其实就是[[Prototype]]的浏览器实现。假如有一个对象 var obj = {}，那么可以通过 obj.<strong>proto</strong> 访问到其原型对象 Object.prototype，即 obj.<strong>proto</strong> === Object.prototype。对象有[[Prototype]]指向一个原型对象，原型对象本身也是对象也有自己的[[Prototype]]指向别的原型对象，这样串接起来，就组成了原型链。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>可以看出，上例中存在一个从 obj 到 null 的原型链，如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>obj<span class="token operator">--</span><span class="token operator">--</span>__proto__<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token operator">--</span><span class="token operator">--</span>__proto__<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token operator">--</span><span class="token operator">--</span>__proto__<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span><span class="token keyword">null</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上例中最后一行调用 obj.toString()方法的时候，js 引擎就是沿着这条原型链查找 toString 方法的。js 首先在 obj 对象自身上查找 toString 方法；未找到，继续沿着原型链查找 Array.prototype 上有没有 toString；未找到，继续沿着原型链在 Object.prototype 上查找。最终在 Object.prototype 上找到了 toString 方法，于是泪流满面的调用该方法。这就是原型链最基本的作用。原型链还是 js 实现继承的本质所在，下一小节再讲。</p> <p>上面我说“js 中的几乎所有对象都有一个特殊的[[Prototype]]内置属性”，为什么不是全部呢？因为 js 可以创建没有内置属性[[Prototype]]的对象：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Object.create 是 es5 的方法，所有浏览器都已支持。该方法创建并返回一个新对象，并将新对象的原型对象赋值为第一个参数。在上例中，Object.create(null)创建了一个新对象并将对象的原型对象赋值为 null。此时对象 o 是没有内置属性[[Prototype]]的（不知道为什么 o.<strong>proto</strong>不是 null，希望知道的大佬评论解释下，万分感激）。</p> <h3 id="js-的继承"><a href="#js-的继承" class="header-anchor">#</a> js 的继承</h3> <hr> <p>js 的继承是通过原型链实现的，具体可以参考我的这篇文章，这里我只讲一讲大家可能比较陌生的“行为委托”。行为委托是《你不知道的 JavaScript》系列作者 kyle 大佬推荐的一种代替继承的方式，该模式主要利用 setPrototypeOf 方法把一个对象的内置原型[[Protytype]]关联到另一个对象上，从而达到继承的目的。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> SuperType <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">initSuper</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> SubType <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">initSub</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>SubType<span class="token punctuation">,</span> SuperType<span class="token punctuation">)</span><span class="token punctuation">;</span>
SubType<span class="token punctuation">.</span><span class="token function">initSub</span><span class="token punctuation">(</span><span class="token string">&quot;17&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SubType<span class="token punctuation">.</span><span class="token function">initSuper</span><span class="token punctuation">(</span><span class="token string">&quot;gim&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SubType<span class="token punctuation">.</span><span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '17'</span>
SubType<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'gim'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>上例就是把父对象 SuperType 关联到子对象 SubType 的内置原型上，这样就可以在子对象上直接调用父对象上的方法。行为委托生成的原型链比 class 继承生成的原型链的关系简单清晰，一目了然。</p> <p><img src="http://lc-zltjehai.cn-n1.lcfile.com/0d3cd26d99861507c3c4/JS%E7%BB%A7%E6%89%BF%E5%9B%BE.png" alt="avatar"></p> <h4 id="类型转换规则"><a href="#类型转换规则" class="header-anchor">#</a> 类型转换规则</h4> <hr> <p>JS 是弱类型语言，不同数据类型之间可以发生转换。</p> <p>JS 中类型转换只有三种情况 : <span style="color:red;"> toString </span> <span style="color:red;"> toNumber </span> <span style="color:red;"> toBoolean </span>。正常情况下转换规则如下:</p> <table><thead><tr><th>原始值/类型</th> <th>目标类型</th> <th>结果</th></tr></thead> <tbody><tr><td>number</td> <td>string</td> <td><span style="color:red;"> 1=&gt;'1' </span></td></tr> <tr><td>array</td> <td>string</td> <td><span style="color:red;"> [1,2]=&gt;'1,2' </span></td></tr> <tr><td>布尔值/函数/symbol</td> <td>string</td> <td>原始值直接加上引号，如: <span style="color:red;"> 'true' </span></td></tr> <tr><td>object</td> <td>string</td> <td><span style="color:red;"> {}=&gt;'[object Object]' </span></td></tr> <tr><td>null</td> <td>number</td> <td><span style="color:red;"> 0 </span></td></tr> <tr><td>symbol</td> <td>number</td> <td>抛错</td></tr> <tr><td>string</td> <td>number</td> <td><span style="color:red;"> '1'=&gt;1 '1a'=&gt;NaN </span>,含非数字则为 <span style="color:red;"> NaN </span></td></tr> <tr><td>数组</td> <td>number</td> <td><span style="color:red;"> []=&gt;0 ['1']=&gt;1 ['1','2']=&gt;NaN </span></td></tr> <tr><td>object/function/undefinded</td> <td>number</td> <td><span style="color:red;"> NaN </span></td></tr> <tr><td>number</td> <td>boolean</td> <td>除了<span style="color:red;"> 0 </span> 、<span style="color:red;"> NaN </span></td></tr> <tr><td>null/undefinded</td> <td>boolean</td> <td>false</td></tr> <tr><td>引用类型</td> <td>boolean</td> <td>true</td></tr></tbody></table> <p>强制类型转换在实现上是靠以下几种抽象操作实现的(目前作为自己的了解部分):</p> <h5 id="toprimitive"><a href="#toprimitive" class="header-anchor">#</a> ToPrimitive</h5> <hr> <p>抽象操作 ToPrimitive 用于将引用类型转为原始类型，js 内置的 <span style="color:red;"> Symbol.toPrimitive </span>函数来实现转换，也可以给对象自定义如下。实现细节比较复杂，<a target="_blank" href="https://link.juejin.im?target=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000016325587" rel="nofollow noopener noreferrer">参考这里</a></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//模拟一个对象的转基本类型操作 ToPrimitive</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
o<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">hint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hint<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//hint字符串至为 string number default 中的一个</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">==</span> <span class="token string">&quot;default&quot;</span> <span class="token operator">||</span> hint <span class="token operator">==</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>valueOf <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> o<span class="token punctuation">.</span><span class="token function">valueof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> o<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> o<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>toString <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> o<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> o<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> o<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">String</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string</span>
<span class="token function">Number</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// number</span>
<span class="token number">1</span> <span class="token operator">+</span> o<span class="token punctuation">;</span> <span class="token comment">// default</span>
<span class="token number">1</span> <span class="token operator">-</span> o<span class="token punctuation">;</span> <span class="token comment">// number</span>
o<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// number</span>
<span class="token operator">++</span>o<span class="token punctuation">;</span> <span class="token comment">// number</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>ToPrimitive 转换规则如下：</p> <ol><li>如果传入参数是 string（目前只有调用 String()函数是执行这个顺序）：首先检查该值是否有 toString()方法。如果有并且返回基本类型值，就使用该值进行强制类型转换。如果没有就检查该值是否有 valueOf()方法。如果有并且返回基本类型值就使用该回值来进行强制类型转换，如果没有或者返回的不是基本类型值，就抛出错误。</li> <li>如果传入参数是 number/default（常见强制类型转换都是这个顺序）：首先检查该值是否有 valueOf()方法。如果有并且返回基本类型值，就使用该值进行强制类型转换。如果没有就检查该值是否有 toString()方法。如果有并且返回基本类型值就使用该回值来进行强制类型转换，如果没有或者返回的不是基本类型值，就抛出错误。</li></ol> <h5 id="tostring"><a href="#tostring" class="header-anchor">#</a> ToString</h5> <hr> <p>抽象操作 ToString，负责处理非字符串到字符串的强制类型转换。当需要一个值的字符串形式，就会进行 ToString 类型转换。</p> <p>String()函数就会执行抽象操作 ToString，遵循下列转换规则：</p> <ol><li>如果值是基本类型，则直接转为字符串。如果是引用类型，则执行 ToPrimitive 抽象操作；</li> <li>如果值是 null，则返回&quot;null&quot;；</li> <li>如果值是 undefined，则返回&quot;undefined&quot;。</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ''</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '0'</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'true'</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'null'</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'undefined'</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;asdf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Symbol('asdf')&quot;</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '[Object object]'</span>
<span class="token comment">// 数组的默认 toString() 方法经过了重新定义，将所有单元字符串化以后再用 &quot;,&quot; 连接起来</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ''</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;asdf&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '1,2,3,4,asdf'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="tonumber"><a href="#tonumber" class="header-anchor">#</a> ToNumber</h5> <hr> <p>抽象操作 ToNumber，负责处理非数字到数字的强制类型转换。</p> <p>Number()执行抽象操作 ToNumber，函数的转换规则如下。</p> <ol><li>如果是 Boolean 值，true 和 false 将分别被转换为 1 和 0。</li> <li>如果是数字值，只是简单的传入和返回。</li> <li>如果是 null 值，返回 0。</li> <li>如果是 undefined，返回 NaN。</li> <li>如果是字符串：如果字符串是空的（不包含任何字符），则将其转换为 0；如果含非数字，则将其转换为 NaN。</li> <li>如果是对象，则执行 ToPrimitive 抽象操作，返回基本类型再按照以上规则处理。</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&quot;asdf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN    与null不同，需要注意</span>
<span class="token comment">// 对象会先通过抽象操作ToPrimitive转为基本类型，然后再转数字</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot; &quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="toboolean"><a href="#toboolean" class="header-anchor">#</a> ToBoolean</h5> <hr> <p>抽象操作 ToBoolean，负责处理非布尔值到布尔值的强制类型转换。</p> <p>转换为 boolean 类型是最为简单的一个。转换规则如下：</p> <p>(1) 可以被强制类型转换为 false 的值</p> <li>  undefinded</li> <li>  null</li> <li>  false</li> <li>  +0、-0 和 NaN</li> <li>  &quot;&quot;</li> <p>(2) 其他值会被被强制类型转换为 <span style="color:red;"> true </span></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>这里有一个概念需要先理解：js的操作符和操作数组成了表达式，表达式必定会返回一个值。无论是一元操作<span class="token operator">++</span>a，还是布尔操作<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">||</span> <span class="token boolean">false</span>，都会返回一个值。另外关于js运算符优先级请参阅<span class="token constant">MDN</span>的：运算符优先级。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="一元操作符"><a href="#一元操作符" class="header-anchor">#</a> 一元操作符</h5> <hr> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 假设存在变量a</span>
<span class="token operator">+</span>a <span class="token operator">-</span> a<span class="token punctuation">;</span> <span class="token comment">// 一元加操作符 // 一元减操作符</span>
<span class="token operator">++</span>a<span class="token punctuation">;</span> <span class="token comment">// 前置递增操作符</span>
<span class="token operator">--</span>a<span class="token punctuation">;</span> <span class="token comment">// 前置递减操作符</span>
a<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// 后置递增操作符</span>
a<span class="token operator">--</span><span class="token punctuation">;</span> <span class="token comment">// 后置递减操作符</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>一元操作符指的是只能操作一个值的操作符，区别与加性操作符可以操作两个值（如 a+b）。</p> <hr> <h6 id="_1-一元加减操作符"><a href="#_1-一元加减操作符" class="header-anchor">#</a> 1. 一元加减操作符</h6> <p>一元加操作符+用于非数字的强制类型转换，作用等同于 Number()。如：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">+</span><span class="token string">&quot;1.1&quot;</span> <span class="token operator">+</span> <span class="token comment">// 1.1</span>
<span class="token string">&quot;asdf&quot;</span> <span class="token operator">+</span> <span class="token comment">// NaN</span>
<span class="token boolean">true</span> <span class="token operator">+</span> <span class="token comment">// 1</span>
<span class="token boolean">false</span> <span class="token operator">+</span> <span class="token comment">// 0</span>
<span class="token keyword">null</span> <span class="token operator">+</span> <span class="token comment">// 0</span>
<span class="token keyword">undefined</span> <span class="token operator">+</span> <span class="token comment">// NaN</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token comment">// NaN</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token comment">// 0</span>
  <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1556258367546</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>一元减操作符-行为与+类似，只不过最终运算结果是负数。如-true 结果是-1。</p> <hr> <h6 id="_2-递增递减操作符"><a href="#_2-递增递减操作符" class="header-anchor">#</a> 2. 递增递减操作符</h6> <p>不同于一元加减操作符，递增递减操作符只能作用于 number 类型。若用于其他类型会直接抛错。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//前置递增</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">57</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token operator">++</span>a<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 58</span>
<span class="token comment">//后置递增</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">57</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token operator">++</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 57</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>前置递增和后置递增的区别在于，前置递增++a 的返回值是增加 1 的，而后置递增 a++的返回值是不增加的。 递减和递增规则一样，不再废话。</p> <hr> <h5 id="加性操作符"><a href="#加性操作符" class="header-anchor">#</a> 加性操作符</h5> <hr> <h6 id="_1-加法操作符"><a href="#_1-加法操作符" class="header-anchor">#</a> 1. 加法操作符+</h6> <ul><li>操作符常用于数学的计算和字符串的拼接，规则如下：</li></ul> <ol><li>如果两个操作符都是数值，执行常规的加法计算</li> <li>如果有一个操作数是 NaN，则结果是 NaN；</li> <li>如果两个操作数都是字符串，则将第二个操作数与第一个操作数拼接起来；</li> <li>如果只有一个操作数是字符串，则将另一个操作数转换为字符串，然后再将两个字符串拼接起来。</li> <li>如果有一个操作数是对象，则执行抽象操作 ToPrimitive（先 valueOf 再 toString）取的返回值，然后再应用前面关于字符串的规则。</li> <li>对于 undefined 和 null，则分别调用 String()函数并取得字符串&quot;undefined&quot;和&quot;null&quot;。</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span> <span class="token comment">// 2</span>
<span class="token number">NaN</span><span class="token operator">+</span><span class="token number">1</span> <span class="token comment">// NaN</span>
<span class="token string">'asdf'</span><span class="token operator">+</span><span class="token string">'ghjk'</span> <span class="token comment">// 'asdfghjk'</span>
<span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span><span class="token string">'1'</span> <span class="token comment">// '21'</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span> <span class="token comment">// 1</span>
<span class="token keyword">null</span><span class="token operator">+</span><span class="token keyword">undefined</span> <span class="token comment">// 'nullundefined'</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">+</span><span class="token number">1</span> <span class="token comment">// '[Object object]1'   实际执行：''+'[Object object]'+1</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">+</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span> <span class="token comment">// 1    {}位于行首会被解释为代码块，此处代码块被忽略，因此实际执行：+[]+1，结果为数字1</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr> <h6 id="_2-减法操作符"><a href="#_2-减法操作符" class="header-anchor">#</a> 2. 减法操作符-</h6> <ol><li>如果两个操作符都是数值，执行常规的加法计算</li> <li>如果有一个操作数是 NaN，则结果是 NaN；</li> <li>如果有一个操作数是字符串、布尔值、null 或 undefined，则先在后台调用 Number()函数将其转换为数值，然后再根据前面的规则执行减法计算。如果转换的结果是 NaN，则减法的结果就是 NaN；</li> <li>如果有一个操作数是对象，则执行抽象操作 ToPrimitive，先调用对象的 valueOf()方法以取得表示该对象的数值。如果得到的值是 NaN，则减法的结果就是 NaN。如果对象没有 valueOf()方法或者返回的不是基本类型值，则调用其 toString()方法并将得到的字符串转换为数值。</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span> <span class="token comment">// 0</span>
<span class="token number">NaN</span><span class="token operator">-</span><span class="token number">1</span> <span class="token comment">// NaN</span>
<span class="token number">10</span><span class="token operator">-</span><span class="token boolean">true</span><span class="token operator">-</span><span class="token keyword">null</span> <span class="token comment">// 9</span>
<span class="token number">10</span><span class="token operator">-</span><span class="token boolean">true</span><span class="token operator">-</span><span class="token keyword">undefined</span> <span class="token comment">// NaN</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">1</span> <span class="token comment">// 0</span>
<span class="token punctuation">[</span><span class="token string">'11'</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">11</span> <span class="token comment">// 0</span>
<span class="token number">11</span><span class="token operator">-</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// NaN</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr> <h5 id="乘性操作符"><a href="#乘性操作符" class="header-anchor">#</a> 乘性操作符</h5> <p>乘性操作符包括乘法*、除法/、除余（求模）%。规则如下：</p> <ol><li>如果两个操作符都是数值，执行常规乘除求模；</li> <li>如果有一个操作数是 NaN，则结果是 NaN；</li> <li>如果有一个操作数不是数值，则在后台调用 Number()将其转换为数值，然后再应用上面的规则。</li></ol> <p>数值计算较为特殊的如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token number">Infinity</span> <span class="token operator">*</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
<span class="token number">Infinity</span> <span class="token operator">/</span> <span class="token number">Infinity</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
<span class="token number">0</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
<span class="token number">Infinity</span> <span class="token operator">%</span> a<span class="token punctuation">;</span> <span class="token comment">// NaN a为任意数值</span>
a <span class="token operator">%</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// NaN a为任意数值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr> <h5 id="布尔操作符"><a href="#布尔操作符" class="header-anchor">#</a> 布尔操作符</h5> <hr> <h6 id="_1-逻辑非"><a href="#_1-逻辑非" class="header-anchor">#</a> 1. 逻辑非 !</h6> <p>逻辑非操作符会将任意值转换为一个布尔值，转换规则和 Boolean()函数相反。连续使用两个逻辑非操作符，等同于调用了 Boolean()。常见有大牛写代码用!!isTrue 来代替 Boolean(isTrue)函数。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">!</span><span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token operator">!</span><span class="token operator">!</span><span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token operator">!</span><span class="token number">NaN</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token operator">!</span><span class="token operator">!</span><span class="token number">NaN</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token operator">!</span><span class="token number">1234</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token operator">!</span><span class="token operator">!</span><span class="token number">1234</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token operator">!</span><span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token operator">!</span><span class="token operator">!</span><span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h6 id="_2-逻辑或"><a href="#_2-逻辑或" class="header-anchor">#</a> 2. 逻辑或 ||</h6> <p>短路操作：如果第一个操作数能够决定结果，那么就不会再对第二个操作数求值。</p> <p>逻辑或操作符是短路操作，如果第一个操作数的求值结果（布尔求值，下同）为 true，则直接返回第一个操作数，不再对第二个操作数求值。如果第一个操作符求职结果为 false，则返回第二个操作数。因此，常见大神写代码 isExist || getIsExist()，就是利用的短路操作，如果 isExist 求值结果为 true，就不再执行 getExist()函数。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// []   对象（包括数组、函数等）的求值结果永远为`true`，直接返回这个对象</span>
<span class="token number">0</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// []</span>
<span class="token number">1</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token number">NaN</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h6 id="_3-逻辑与"><a href="#_3-逻辑与" class="header-anchor">#</a> 3. 逻辑与 &amp;&amp;</h6> <p>逻辑与操作属于短路操作，即如果第一个操作数求值结果为 false，则直接返回第一个操作数，那么就不会再对第二个操作数求值。如果第一个操作数求值为 true，则返回第二个操作数。可以用来做条件限制 obj &amp;&amp; obj.value。只有 obj 对象存在了，才会取 obj.value 值。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token boolean">true</span> <span class="token comment">// 0</span>
<span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// null</span>
<span class="token number">NaN</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">null</span> <span class="token comment">// NaN</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// {}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>需要注意布尔操作符存在优先级：! &gt; &amp;&amp; &gt; ||：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token number">2</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">&amp;&amp;</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ??????你知道结果吗？实际上，代码相当于下面一行</span>
<span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token number">2</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">&amp;&amp;</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr> <h5 id="相等操作符"><a href="#相等操作符" class="header-anchor">#</a> 相等操作符</h5> <hr> <p>相等操作符有== != === !==四个，其中相等和不相等实行先转换类型再比较，全等和不全等实行仅比较而不转换类型。相等操作符返回布尔值 true 或 false。</p> <h6 id="_1-相等和不相等"><a href="#_1-相等和不相等" class="header-anchor">#</a> 1. 相等和不相等</h6> <p>不同类型操作数比较规则如下：</p> <li> 先判断是否在对比 null 和 undefined，是的话就会返回 true。null和undefined不相等于其他任何值。</li> <li> 判断两者类型是否为 string 和 number，是的话就会将字符串转换为 number；</li> <li> 判断其中一方是否为 boolean，是的话就会把 boolean 转为 number 再进行判断；</li> <li> 判断其中一方是否为 object 且另一方为 string、number 或者 symbol，是的话就会把 object 转为原始类型再进行判断。</li> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">/*
 * 首先，布尔操作符!优先级更高，所以被转变为：[] == false
 * 其次，操作数存在布尔值false，将布尔值转为数字：[] == 0
 * 再次，操作数[]是对象，转为原始类型（先调用valueOf()，得到的还是[]，再调用toString()，得到空字符串''）：'' == 0
 * 最后，字符串和数字比较，转为数字：0 == 0
 */</span>
<span class="token number">NaN</span> <span class="token operator">==</span> <span class="token number">NaN</span><span class="token punctuation">;</span> <span class="token comment">// false     NaN不等于任何值</span>
<span class="token keyword">null</span> <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token keyword">null</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h6 id="_2-全等和不全等"><a href="#_2-全等和不全等" class="header-anchor">#</a> 2.全等和不全等</h6> <p>全等和不全等在比较之前不转换类型，所以相对简单：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">null</span> <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token comment">// false</span>
<span class="token string">'1'</span> <span class="token operator">===</span> <span class="token number">1</span> <span class="token comment">// false</span>
<span class="token number">0</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token comment">// false</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// false    引用类型比较相等性还要看是否指向同一个内存地址</span>
<span class="token number">NaN</span> <span class="token operator">===</span> <span class="token number">NaN</span> <span class="token comment">// false    NaN比较特殊，不等于自身</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr> <h5 id="关系操作符"><a href="#关系操作符" class="header-anchor">#</a> 关系操作符</h5> <hr> <h6 id="_1-条件操作符"><a href="#_1-条件操作符" class="header-anchor">#</a> 1. 条件操作符</h6> <p>三元表达式就是由条件操作符? :组成：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>a <span class="token operator">&gt;</span> b <span class="token operator">?</span> a <span class="token operator">:</span> b<span class="token punctuation">;</span> <span class="token comment">// 如果 ? 前的操作求值为 true ，则返回 a ，否则返回 b</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_2-赋值操作符"><a href="#_2-赋值操作符" class="header-anchor">#</a> 2. 赋值操作符</h5> <p>js 中等号 = 用于赋值操作，var a = 1 就是把值 1 赋值给变量 a。可以和 + - * / % 构成复合赋值：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>a <span class="token operator">+=</span> b<span class="token punctuation">;</span> <span class="token comment">// 等同于 a = a + b</span>
a <span class="token operator">-=</span> b<span class="token punctuation">;</span> <span class="token comment">// 等同于 a = a - b</span>
a <span class="token operator">*=</span> b<span class="token punctuation">;</span> <span class="token comment">// 等同于 a = a * b</span>
a <span class="token operator">/=</span> b<span class="token punctuation">;</span> <span class="token comment">// 等同于 a = a / b</span>
a <span class="token operator">%=</span> b<span class="token punctuation">;</span> <span class="token comment">// 等同于 a = a % b</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h6 id="_3-逗号操作符"><a href="#_3-逗号操作符" class="header-anchor">#</a> 3. 逗号操作符</h6> <p>逗号操作符常用于一条语句声明多个变量：var a = 1, b = 2, c;</p> <hr> <h6 id="_4-位操作符"><a href="#_4-位操作符" class="header-anchor">#</a> 4. 位操作符</h6> <hr> <p>js 中数值是以 64 位格式储存的，前 32 位是整数，后 32 位是小数。位操作符会将 64 位的值转为 32 位的，所以位操作符会强制将浮点数转为整数。下面说几个常用的位操作符：</p> <ol><li>位操作符 ~：~x 相当于-(x+1)，可以用来代替 indexOf 作为判断条件。~str.indexOf('asdf')相当于 str.indexOf('asdf')&gt;-1；</li> <li>位操作符 |：可用于将值截除为一个 32 位整数。1.11 | 0 执行结果是 1</li></ol> <h6 id="不可思议的实例"><a href="#不可思议的实例" class="header-anchor">#</a> 不可思议的实例</h6> <hr> <ol><li>请听题</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> n<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
a<span class="token punctuation">.</span>x <span class="token operator">=</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> n<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// ?</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>最后的结果肯定跟你想的不一样。此例考察了 运算符优先级/引用类型赋值 两个知识点：</p> <p>关键在第三句，根据运算符优先级可以加个括号理解此表达式：a.x = (a = { n: 2 })。由于第二句， a 和 b 指向了同一个内存地址 1 ，所以此时 a.x 也是 b.x ，是内存地址 1 中的属性 x ，而这个属性 x 指向了后面括号中的返回值。后面括号中的表达式把变量 a 重新赋值为 { n: 2 } ，此时变量 a 和变量 b 已经割裂，变量 b 仍然指向原地址 1 ，而变量 a 却创建新对象{ n: 2 }并存放在新内存地址 2 。并且后面括号的表达式返回新地址中的对象 { n: 2 } ，赋值给地址 1 中的属性 x 。</p> <h5 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h5> <hr> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>s的类型转换虽然很让人头疼，但并不是无迹可寻。只要掌握了规则，就能够按规则判断出来类型到底会如何转换。而规则中很重要的一部分是，引用类型到基本类型的转换是通过ToPrimitive抽象操作完成的。掌握了ToPrimitive抽象操作，就掌握了类型转换的核心规则。
类型转换是很常见和很常用的，虽然规则多了点，但却值得去努力学习

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><hr> <p><a href="https://juejin.im/post/5cc27651f265da0368146218" target="_blank">原文地址 : https://juejin.im/post/5cc27651f265da0368146218</a></p> <hr></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">最后更新时间: </span> <span class="time">3/9/2020, 2:40:08 PM</span></div></footer> <!----> <!----></main> <!----> <div class="comments-wrapper" data-v-4698c43e><div class="valine-wrapper"><div id="valine"></div></div></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-a81d141e data-v-a81d141e><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-a81d141e><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-a81d141e></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-a81d141e></path></svg></div><SWUpdatePopup></SWUpdatePopup><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;left:35px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2dcanvas" width="135" height="300" class="live2dcanvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/assets/js/app.4408c1df.js" defer></script><script src="/assets/js/4.73e12695.js" defer></script><script src="/assets/js/1.7bb093f7.js" defer></script><script src="/assets/js/48.48325f0a.js" defer></script>
  </body>
</html>
